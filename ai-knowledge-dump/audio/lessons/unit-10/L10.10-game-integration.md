# L10.10: Full Game Integration

## Core Concept
Bring all lessons together into a complete game audio system.

## Game Audio Manager

```javascript
export class GameAudioManager {
  constructor() {
    this.backend = null;
    this.ringBuffer = null;
    this.gameLoop = null;
    this.listenerPosition = { x: 0, y: 0, z: 0 };
  }
  
  async init(config) {
    // L10.1: Load backend via function table
    const backends = ['alsa', 'pulse', 'webaudio'];
    for (const name of backends) {
      await loadBackend(`./backends/${name}-backend.mjs`);
      this.backend = getBackend();
      const handle = this.backend.init('default');
      if (handle >= 0) break;
    }
    
    // L10.2: Create ring buffer
    this.ringBuffer = createRingBuffer(config.bufferSize);
    
    // L10.3: Initialize game loop
    this.gameLoop = gameLoopSimulator(config.targetFps);
  }
  
  processFrame() {
    const frame = this.gameLoop.next().value;
    const outputMix = new Float32Array(frame.samplesToWrite);
    
    // L10.9: Mix spatial audio (ECS)
    mixSounds(outputMix, this.listenerPosition.x, this.listenerPosition.y, this.listenerPosition.z);
    
    // L10.2: Write to ring buffer
    ringBufferWrite(this.ringBuffer, outputMix);
    
    // L10.7: Record latency
    recordSample(performance.now(), frame.startTime, performance.now());
  }
  
  playSound(sampleData, x, y, z, priority = 5) {
    return spawnSound(sampleData, x, y, z, priority);
  }
}
```

**Usage:**
```javascript
const audio = new GameAudioManager();
await audio.init({ sampleRate: 48000, channels: 2, bufferSize: 4096, targetFps: 60 });

function gameLoop() {
  audio.processFrame();
  requestAnimationFrame(gameLoop);
}
gameLoop();
```

**Next: L10.11 - Final Reflection**
